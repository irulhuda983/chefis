import{_ as p,r as d,u as m,d as x,c as b,a as e,t as u,f as i,v as c,w as g,n as w,y,o as v,j as _}from"./app-a756ee56.js";import{I as h}from"./userprofil-8b6b616a.js";const k={setup(){const r=localStorage.getItem("USER")?JSON.parse(localStorage.getItem("USER")):null,t=d(),n=d(!1),{notify:o}=_(),{getUser:f}=m(),l=x({nama:r.nama,nrp:r.nrp,password:"",foto:r.foto}),a=d(null);return{image:t,payload:l,user:r,ImgUser:h,errors:a,readImage:()=>{l.foto=URL.createObjectURL(t.value.files[0])},updateProfil:async()=>{n.value=!0;try{let s=new FormData;s.append("nama",l.nama??""),s.append("nrp",l.nrp??""),s.append("password",l.password??""),t.value.files[0]!==void 0&&s.append("foto",t.value.files[0]);let{data:G}=await axios.post("/user/update-profil",s,{headers:{"Content-Type":"multipart/form-data"}});f(),o({text:"Profil Tersimpan",type:"success",duration:2e3}),l.password=""}catch(s){s.response.status==401?(localStorage.removeItem("TOKEN"),location.reload()):s.response.status==422&&(a.value=s.response.data.errors,o({text:"Gagal Menyimpan Data, Cek Kembali data yang anda masukkan",type:"error",duration:2e3}))}finally{n.value=!1}},loading:n}}},F={class:"w-full box-border text-[#808080] text-sm 2xl:text-base"},D={class:"w-full box-border"},P=e("div",{class:"w-full box-border mb-5 flex justify-between box-border items-center"},[e("div",{class:"w-2/3"},[e("h1",{class:"text-zinc-900 font-bold text-xl"},"Edit Profil")])],-1),j={class:"border border-zinc-100 shadow-sm w-full box-border rounded box-border bg-zinc-50/10 backdrop-blur mb-5 p-4 flex justify-center"},I={class:"w-1/3"},M={class:"mb-3"},S={class:"w-full flex justify-center"},U={class:"box-border overflow-hidden w-52 h-52 rounded-full bg-gray-200 cursor-pointer relative items-center justufy-center"},N=["src"],R=y('<label for="file-upload" class="w-full flex items-center justify-center bg-black/10 p-3 absolute bottom-0 left-0 right-0 backdrop-blur right-1/3 cursor-pointer"><div class="rounded-full h-8 w-8 bg-black/20 flex items-center justify-center"><div class="w-5 h-5 text-gray-200"><svg xmlns="http://www.w3.org/2000/svg" id="Filled" viewBox="0 0 24 24" class="w-full h-full fill-current"><path d="M17.721,3,16.308,1.168A3.023,3.023,0,0,0,13.932,0H10.068A3.023,3.023,0,0,0,7.692,1.168L6.279,3Z"></path><circle cx="12" cy="14" r="4"></circle><path d="M19,5H5a5.006,5.006,0,0,0-5,5v9a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V10A5.006,5.006,0,0,0,19,5ZM12,20a6,6,0,1,1,6-6A6.006,6.006,0,0,1,12,20Z"></path></svg></div></div></label>',1),V={class:"w-full mr-6"},z={class:"w-full mb-5"},A=e("p",{class:"text-xs 2xl:text-sm w-32 flex-none"},"Nama",-1),C={class:"w-full mb-5"},E=e("p",{class:"text-xs 2xl:text-sm w-32 flex-none"},"NRP",-1),T={class:"w-full mb-5"},B=e("p",{class:"text-xs 2xl:text-sm w-32 flex-none"},"Password",-1),H={class:"w-full"},K=e("div",{class:"text-[10px] italic font-semibold text-orange-700"},"Kosongkan Jika Tidak ingin merubah password",-1),L={class:"w-full"};function O(r,t,n,o,f,l){return v(),b("div",F,[e("div",D,[P,e("div",j,[e("div",I,[e("div",M,u(o.errors),1),e("div",S,[e("div",U,[e("img",{src:o.payload.foto??o.ImgUser,alt:"",loading:"lazy",class:"w-full object-cover object-center"},null,8,N),R]),e("input",{id:"file-upload",ref:"image",type:"file",class:"sr-only",onChange:t[0]||(t[0]=(...a)=>o.readImage&&o.readImage(...a))},null,544)]),e("div",V,[e("div",z,[A,i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.payload.nama=a),type:"text",id:"nama",class:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-xs 2xl:text-sm rounded-sm block w-full p-2.5 outline-none focus:ring-[#4D79FF] focus:border-[#4D79FF]",autocomplete:"off",placeholder:"Masukkan Nama"},null,512),[[c,o.payload.nama]])]),e("div",C,[E,i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.payload.nrp=a),type:"text",id:"nrp",class:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-xs 2xl:text-sm rounded-sm block w-full p-2.5 outline-none focus:ring-[#4D79FF] focus:border-[#4D79FF]",autocomplete:"off",placeholder:"Masukkan NRP"},null,512),[[c,o.payload.nrp]])]),e("div",T,[B,e("div",H,[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.payload.password=a),type:"password",id:"password",class:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-xs 2xl:text-sm rounded-sm block w-full p-2.5 outline-none focus:ring-[#4D79FF] focus:border-[#4D79FF]",autocomplete:"off",placeholder:"Masukkan Password"},null,512),[[c,o.payload.password]]),K])]),e("div",L,[e("button",{onClick:t[4]||(t[4]=g((...a)=>o.updateProfil&&o.updateProfil(...a),["prevent"])),class:w(["w-full bg-[#4D79FF] text-white py-2.5 px-6 border border-[#4D79FF] hover:text-[#4D79FF] hover:bg-transparent",o.loading?"cursor-not-allowed":"cursor-pointer"])},u(o.loading?"Memuat...":"Simpan"),3)])])])])])])}const W=p(k,[["render",O]]);export{W as default};
